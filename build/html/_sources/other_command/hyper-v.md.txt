# Hyper-V

## 仮想ディスクの圧縮

1. [SDelete](https://docs.microsoft.com/en-us/sysinternals/downloads/sdelete)をゲストOSで実行する

    ```bat
    rem Cドライブ
    sdelete -z C:

    rem Dドライブ
    sdelete -z D:
    ```

1. ゲストをシャットダウン後、ホスト側でPowershellの`Optimize-VHD`を実行する。

    ```powershell
    # VHDの圧縮コマンドレット
    Optimize-VHD -Path "C:\Users\Public\Documents\Hyper-V\Virtual hard disks\ITS-0102-TEST3.vhdx" -Mode Full
    ```
